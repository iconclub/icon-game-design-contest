var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function s(){return Object.create(null)}function o(t){t.forEach(n)}function r(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let c;function i(t,e){return c||(c=document.createElement("a")),c.href=e,t===c.href}function l(e,n,s){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const s=e.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}(n,s))}function u(t,e,n,s){if(t){const o=d(t,e,n,s);return t[0](o)}}function d(t,e,n,s){return t[1]&&s?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](s(e))):n.ctx}function f(t,e,n,s){if(t[2]&&s){const o=t[2](s(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let s=0;s<n;s+=1)t[s]=e.dirty[s]|o[s];return t}return e.dirty|o}return e.dirty}function m(t,e,n,s,o,r){if(o){const a=d(e,n,s,r);t.p(a,o)}}function p(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function g(t,e,n){return t.set(n),e}const h="undefined"!=typeof window;let $=h?()=>window.performance.now():()=>Date.now(),y=h?t=>requestAnimationFrame(t):t;const v=new Set;function b(t){v.forEach((e=>{e.c(t)||(v.delete(e),e.f())})),0!==v.size&&y(b)}function _(t){let e;return 0===v.size&&y(b),{promise:new Promise((n=>{v.add(e={c:t,f:n})})),abort(){v.delete(e)}}}function w(t,e){t.appendChild(e)}function x(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function k(t){const e=S("style");return function(t,e){w(t.head||t,e)}(x(t),e),e.sheet}function C(t,e,n){t.insertBefore(e,n||null)}function E(t){t.parentNode.removeChild(t)}function S(t){return document.createElement(t)}function z(t){return document.createTextNode(t)}function T(){return z(" ")}function V(){return z("")}function j(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function M(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function q(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function I(t,e,n,s){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function L(t,e,n=!1){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,!1,e),s}const A=new Map;let P,R=0;function N(t,e,n,s,o,r,a,c=0){const i=16.666/s;let l="{\n";for(let t=0;t<=1;t+=i){const s=e+(n-e)*r(t);l+=100*t+`%{${a(s,1-s)}}\n`}const u=l+`100% {${a(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${c}`,f=x(t),{stylesheet:m,rules:p}=A.get(f)||function(t,e){const n={stylesheet:k(e),rules:{}};return A.set(t,n),n}(f,t);p[d]||(p[d]=!0,m.insertRule(`@keyframes ${d} ${u}`,m.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${d} ${s}ms linear ${o}ms 1 both`,R+=1,d}function O(t,e){const n=(t.style.animation||"").split(", "),s=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),o=n.length-s.length;o&&(t.style.animation=s.join(", "),R-=o,R||y((()=>{R||(A.forEach((t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}})),A.clear())})))}function U(t){P=t}function Y(){if(!P)throw new Error("Function called outside component initialization");return P}function H(t){Y().$$.on_mount.push(t)}const D=[],F=[],G=[],B=[],J=Promise.resolve();let W=!1;function K(t){G.push(t)}const Q=new Set;let X,Z=0;function tt(){const t=P;do{for(;Z<D.length;){const t=D[Z];Z++,U(t),et(t.$$)}for(U(null),D.length=0,Z=0;F.length;)F.pop()();for(let t=0;t<G.length;t+=1){const e=G[t];Q.has(e)||(Q.add(e),e())}G.length=0}while(D.length);for(;B.length;)B.pop()();W=!1,Q.clear(),U(t)}function et(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(K)}}function nt(){return X||(X=Promise.resolve(),X.then((()=>{X=null}))),X}function st(t,e,n){t.dispatchEvent(L(`${e?"intro":"outro"}${n}`))}const ot=new Set;let rt;function at(){rt={r:0,c:[],p:rt}}function ct(){rt.r||o(rt.c),rt=rt.p}function it(t,e){t&&t.i&&(ot.delete(t),t.i(e))}function lt(t,e,n,s){if(t&&t.o){if(ot.has(t))return;ot.add(t),rt.c.push((()=>{ot.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}}const ut={duration:0};function dt(n,s,a,c){let i=s(n,a),l=c?0:1,u=null,d=null,f=null;function m(){f&&O(n,f)}function p(t,e){const n=t.b-l;return e*=Math.abs(n),{a:l,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function g(s){const{delay:r=0,duration:a=300,easing:c=e,tick:g=t,css:h}=i||ut,y={start:$()+r,b:s};s||(y.group=rt,rt.r+=1),u||d?d=y:(h&&(m(),f=N(n,l,s,a,r,c,h)),s&&g(0,1),u=p(y,a),K((()=>st(n,s,"start"))),_((t=>{if(d&&t>d.start&&(u=p(d,a),d=null,st(n,u.b,"start"),h&&(m(),f=N(n,l,u.b,u.duration,0,c,i.css))),u)if(t>=u.end)g(l=u.b,1-l),st(n,u.b,"end"),d||(u.b?m():--u.group.r||o(u.group.c)),u=null;else if(t>=u.start){const e=t-u.start;l=u.a+u.d*c(e/u.duration),g(l,1-l)}return!(!u&&!d)})))}return{run(t){r(i)?nt().then((()=>{i=i(),g(t)})):g(t)},end(){m(),u=d=null}}}const ft="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function mt(t,e){lt(t,1,1,(()=>{e.delete(t.key)}))}function pt(t,e,n,s,o,r,a,c,i,l,u,d){let f=t.length,m=r.length,p=f;const g={};for(;p--;)g[t[p].key]=p;const h=[],$=new Map,y=new Map;for(p=m;p--;){const t=d(o,r,p),c=n(t);let i=a.get(c);i?s&&i.p(t,e):(i=l(c,t),i.c()),$.set(c,h[p]=i),c in g&&y.set(c,Math.abs(p-g[c]))}const v=new Set,b=new Set;function _(t){it(t,1),t.m(c,u),a.set(t.key,t),u=t.first,m--}for(;f&&m;){const e=h[m-1],n=t[f-1],s=e.key,o=n.key;e===n?(u=e.first,f--,m--):$.has(o)?!a.has(s)||v.has(s)?_(e):b.has(o)?f--:y.get(s)>y.get(o)?(b.add(s),_(e)):(v.add(o),f--):(i(n,a),f--)}for(;f--;){const e=t[f];$.has(e.key)||i(e,a)}for(;m;)_(h[m-1]);return h}function gt(t){t&&t.c()}function ht(t,e,s,a){const{fragment:c,on_mount:i,on_destroy:l,after_update:u}=t.$$;c&&c.m(e,s),a||K((()=>{const e=i.map(n).filter(r);l?l.push(...e):o(e),t.$$.on_mount=[]})),u.forEach(K)}function $t(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function yt(t,e){-1===t.$$.dirty[0]&&(D.push(t),W||(W=!0,J.then(tt)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function vt(e,n,r,a,c,i,l,u=[-1]){const d=P;U(e);const f=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:c,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:s(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};l&&l(f.root);let m=!1;if(f.ctx=r?r(e,n.props||{},((t,n,...s)=>{const o=s.length?s[0]:n;return f.ctx&&c(f.ctx[t],f.ctx[t]=o)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](o),m&&yt(e,t)),n})):[],f.update(),m=!0,o(f.before_update),f.fragment=!!a&&a(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(E)}else f.fragment&&f.fragment.c();n.intro&&it(e.$$.fragment),ht(e,n.target,n.anchor,n.customElement),tt()}U(d)}class bt{$destroy(){$t(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const _t=[];function wt(e,n=t){let s;const o=new Set;function r(t){if(a(e,t)&&(e=t,s)){const t=!_t.length;for(const t of o)t[1](),_t.push(t,e);if(t){for(let t=0;t<_t.length;t+=2)_t[t][0](_t[t+1]);_t.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(a,c=t){const i=[a,c];return o.add(i),1===o.size&&(s=n(r)||t),a(e),()=>{o.delete(i),0===o.size&&(s(),s=null)}}}}const xt=wt({_id:"",name:"",email:"",role:"",hasVoted:!1,gamesVoted:[],avatar:""});function kt(e){let n,s,o,r,a,c,l,u,d,f;return{c(){n=S("nav"),s=S("a"),s.innerHTML='<img src="favicon.png" alt="logo" class="navbar__logo svelte-1u1pyhx"/>\n    Game Design Contest 2022',o=T(),r=S("div"),a=S("div"),c=z("Hello, "),l=z(e[1]),u=T(),d=S("img"),M(s,"href","/"),M(s,"class","navbar__brand svelte-1u1pyhx"),i(d.src,f=e[0])||M(d,"src",f),M(d,"alt","Avatar"),M(d,"class","navbar__avatar svelte-1u1pyhx"),M(a,"class","navbar__item svelte-1u1pyhx"),M(r,"class","navbar__right"),M(n,"class","navbar svelte-1u1pyhx")},m(t,e){C(t,n,e),w(n,s),w(n,o),w(n,r),w(r,a),w(a,c),w(a,l),w(a,u),w(a,d)},p(t,[e]){2&e&&q(l,t[1]),1&e&&!i(d.src,f=t[0])&&M(d,"src",f)},i:t,o:t,d(t){t&&E(n)}}}function Ct(t,e,n){let s,o,r;return l(t,xt,(t=>n(2,r=t))),t.$$.update=()=>{4&t.$$.dirty&&n(1,s=r.name||"Guest"),4&t.$$.dirty&&n(0,o=r.avatar||"images/default_avatar_retro.jpg")},[o,s,r]}class Et extends bt{constructor(t){super(),vt(this,t,Ct,kt,a,{})}}const St=wt([]),zt=t=>{const e=Date.now(),n={id:e,type:"info",timeout:4e3},s=Object.assign(Object.assign({},n),t);St.update((t=>[...t,s])),setTimeout((()=>Tt(e)),s.timeout)},Tt=t=>{St.update((e=>e.filter((e=>e.id!==t))))};function Vt(t){const e=t-1;return e*e*e+1}function jt(t,{delay:n=0,duration:s=400,easing:o=e}={}){const r=+getComputedStyle(t).opacity;return{delay:n,duration:s,easing:o,css:t=>"opacity: "+t*r}}function Mt(t,{delay:e=0,duration:n=400,easing:s=Vt,x:o=0,y:r=0,opacity:a=0}={}){const c=getComputedStyle(t),i=+c.opacity,l="none"===c.transform?"":c.transform,u=i*(1-a);return{delay:e,duration:n,easing:s,css:(t,e)=>`\n\t\t\ttransform: ${l} translate(${(1-t)*o}px, ${(1-t)*r}px);\n\t\t\topacity: ${i-u*e}`}}function qt(t,{delay:e=0,duration:n=400,easing:s=Vt,start:o=0,opacity:r=0}={}){const a=getComputedStyle(t),c=+a.opacity,i="none"===a.transform?"":a.transform,l=1-o,u=c*(1-r);return{delay:e,duration:n,easing:s,css:(t,e)=>`\n\t\t\ttransform: ${i} scale(${1-l*e});\n\t\t\topacity: ${c-u*e}\n\t\t`}}function It(t){let e;return{c(){e=S("span"),e.textContent="info",M(e,"class","material-icons")},m(t,n){C(t,e,n)},d(t){t&&E(e)}}}function Lt(t){let e;return{c(){e=S("span"),e.textContent="warning",M(e,"class","material-icons")},m(t,n){C(t,e,n)},d(t){t&&E(e)}}}function At(t){let e;return{c(){e=S("span"),e.textContent="check_circle",M(e,"class","material-icons")},m(t,n){C(t,e,n)},d(t){t&&E(e)}}}function Pt(n){let s,a,c,i,l,d,g,h,y,v,b;function x(t,e){return"success"===t[0]?At:"error"===t[0]?Lt:It}let k=x(n),z=k(n);const V=n[3].default,q=u(V,n,n[2],null);return{c(){s=S("div"),z.c(),a=T(),c=S("div"),q&&q.c(),i=T(),l=S("button"),l.innerHTML="<span>×</span>",M(c,"class","toast__content svelte-17a9mdj"),M(l,"type","button"),M(l,"class","toast__close svelte-17a9mdj"),M(s,"class",d="toast toast--"+n[0]+" svelte-17a9mdj"),M(s,"role","alert")},m(t,e){C(t,s,e),z.m(s,null),w(s,a),w(s,c),q&&q.m(c,null),w(s,i),w(s,l),y=!0,v||(b=j(l,"click",n[1]),v=!0)},p(t,[e]){k!==(k=x(t))&&(z.d(1),z=k(t),z&&(z.c(),z.m(s,a))),q&&q.p&&(!y||4&e)&&m(q,V,t,t[2],y?f(V,t[2],e,null):p(t[2]),null),(!y||1&e&&d!==(d="toast toast--"+t[0]+" svelte-17a9mdj"))&&M(s,"class",d)},i(n){y||(it(q,n),K((()=>{h&&h.end(1),g=function(n,s,o){let a,c,i=s(n,o),l=!1,u=0;function d(){a&&O(n,a)}function f(){const{delay:s=0,duration:o=300,easing:r=e,tick:f=t,css:m}=i||ut;m&&(a=N(n,0,1,o,s,r,m,u++)),f(0,1);const p=$()+s,g=p+o;c&&c.abort(),l=!0,K((()=>st(n,!0,"start"))),c=_((t=>{if(l){if(t>=g)return f(1,0),st(n,!0,"end"),d(),l=!1;if(t>=p){const e=r((t-p)/o);f(e,1-e)}}return l}))}let m=!1;return{start(){m||(m=!0,O(n),r(i)?(i=i(),nt().then(f)):f())},invalidate(){m=!1},end(){l&&(d(),l=!1)}}}(s,Mt,{y:200,duration:1e3}),g.start()})),y=!0)},o(n){lt(q,n),g&&g.invalidate(),h=function(n,s,a){let c,i=s(n,a),l=!0;const u=rt;function d(){const{delay:s=0,duration:r=300,easing:a=e,tick:d=t,css:f}=i||ut;f&&(c=N(n,1,0,r,s,a,f));const m=$()+s,p=m+r;K((()=>st(n,!1,"start"))),_((t=>{if(l){if(t>=p)return d(0,1),st(n,!1,"end"),--u.r||o(u.c),!1;if(t>=m){const e=a((t-m)/r);d(1-e,e)}}return l}))}return u.r+=1,r(i)?nt().then((()=>{i=i(),d()})):d(),{end(t){t&&i.tick&&i.tick(1,0),l&&(c&&O(n,c),l=!1)}}}(s,Mt,{x:200}),y=!1},d(t){t&&E(s),z.d(),q&&q.d(t),t&&h&&h.end(),v=!1,b()}}}function Rt(t,e,n){let{$$slots:s={},$$scope:o}=e,{type:r="error"}=e;const a=function(){const t=Y();return(e,n)=>{const s=t.$$.callbacks[e];if(s){const o=L(e,n);s.slice().forEach((e=>{e.call(t,o)}))}}}();return t.$$set=t=>{"type"in t&&n(0,r=t.type),"$$scope"in t&&n(2,o=t.$$scope)},[r,function(){a("dismiss")},o,s]}class Nt extends bt{constructor(t){super(),vt(this,t,Rt,Pt,a,{type:0})}}function Ot(t,e,n){const s=t.slice();return s[2]=e[n],s}function Ut(t){let e,n,s=[],o=new Map,r=t[0];const a=t=>t[2].id;for(let e=0;e<r.length;e+=1){let n=Ot(t,r,e),c=a(n);o.set(c,s[e]=Ht(c,n))}return{c(){e=S("div");for(let t=0;t<s.length;t+=1)s[t].c();M(e,"class","toasts svelte-qbaiql")},m(t,o){C(t,e,o);for(let t=0;t<s.length;t+=1)s[t].m(e,null);n=!0},p(t,n){1&n&&(r=t[0],at(),s=pt(s,n,a,1,t,r,o,e,mt,Ht,null,Ot),ct())},i(t){if(!n){for(let t=0;t<r.length;t+=1)it(s[t]);n=!0}},o(t){for(let t=0;t<s.length;t+=1)lt(s[t]);n=!1},d(t){t&&E(e);for(let t=0;t<s.length;t+=1)s[t].d()}}}function Yt(t){let e,n=t[2].message+"";return{c(){e=z(n)},m(t,n){C(t,e,n)},p(t,s){1&s&&n!==(n=t[2].message+"")&&q(e,n)},d(t){t&&E(e)}}}function Ht(t,e){let n,s,o;return s=new Nt({props:{type:e[2].type,$$slots:{default:[Yt]},$$scope:{ctx:e}}}),s.$on("dismiss",(function(){return e[1](e[2])})),{key:t,first:null,c(){n=V(),gt(s.$$.fragment),this.first=n},m(t,e){C(t,n,e),ht(s,t,e),o=!0},p(t,n){e=t;const o={};1&n&&(o.type=e[2].type),33&n&&(o.$$scope={dirty:n,ctx:e}),s.$set(o)},i(t){o||(it(s.$$.fragment,t),o=!0)},o(t){lt(s.$$.fragment,t),o=!1},d(t){t&&E(n),$t(s,t)}}}function Dt(t){let e,n,s=t[0]&&Ut(t);return{c(){s&&s.c(),e=V()},m(t,o){s&&s.m(t,o),C(t,e,o),n=!0},p(t,[n]){t[0]?s?(s.p(t,n),1&n&&it(s,1)):(s=Ut(t),s.c(),it(s,1),s.m(e.parentNode,e)):s&&(at(),lt(s,1,1,(()=>{s=null})),ct())},i(t){n||(it(s),n=!0)},o(t){lt(s),n=!1},d(t){s&&s.d(t),t&&E(e)}}}function Ft(t,e,n){let s;l(t,St,(t=>n(0,s=t)));return[s,t=>Tt(t.id)]}class Gt extends bt{constructor(t){super(),vt(this,t,Ft,Dt,a,{})}}function Bt(t){this.message=t}Bt.prototype=new Error,Bt.prototype.name="InvalidCharacterError";var Jt="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new Bt("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,s,o=0,r=0,a="";s=e.charAt(r++);~s&&(n=o%4?64*n+s:s,o++%4)?a+=String.fromCharCode(255&n>>(-2*o&6)):0)s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(s);return a};function Wt(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(Jt(t).replace(/(.)/g,(function(t,e){var n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(e)}catch(t){return Jt(e)}}function Kt(t){this.message=t}function Qt(t,e){if("string"!=typeof t)throw new Kt("Invalid token specified");var n=!0===(e=e||{}).header?0:1;try{return JSON.parse(Wt(t.split(".")[n]))}catch(t){throw new Kt("Invalid token specified: "+t.message)}}Kt.prototype=new Error,Kt.prototype.name="InvalidTokenError";class Xt{constructor(){this.baseUrl="https://icon-game-design-contest.herokuapp.com",this.headers={"Content-Type":"application/json"}}static getInstance(){return Xt.instance||(Xt.instance=new Xt),Xt.instance}async get(t,e={}){const n=this.processUrl(t),s=new URLSearchParams(e);return(await fetch(`${this.baseUrl}/${n}?${s}`,{method:"GET",credentials:"include"})).json()}async post(t,e={},n={},s=this.headers){const o=this.processUrl(t),r=new URLSearchParams(n);return(await fetch(`${this.baseUrl}/${o}?${r}`,{method:"POST",headers:s,credentials:"include",body:JSON.stringify(e)})).json()}processUrl(t){return t.startsWith("/")?t.slice(1):t}}const Zt=Xt.getInstance();const te=new class{async sendPayload(t){const e=await Zt.post("/auth/google/signin",t);if(200===e.statusCode)return e.data;throw new Error("Failed to sign in")}},ee=wt({hasSignedIn:!1});function ne(e){let n,s,o,r;return{c(){n=S("script"),o=T(),r=S("div"),i(n.src,s="https://accounts.google.com/gsi/client")||M(n,"src","https://accounts.google.com/gsi/client"),n.async=!0,n.defer=!0,M(r,"id","g_id_onload"),M(r,"data-client_id","769272591537-uc3vsgm4fi497461vhkcaugm766q3gqg.apps.googleusercontent.com"),M(r,"data-callback","handleCredentialResponse"),M(r,"data-locale","en")},m(t,e){w(document.head,n),C(t,o,e),C(t,r,e)},p:t,i:t,o:t,d(t){E(n),t&&E(o),t&&E(r)}}}function se(t,e,n){let s,o;return l(t,xt,(t=>n(0,s=t))),l(t,ee,(t=>n(1,o=t))),window.handleCredentialResponse=async t=>{const e=Qt((await te.sendPayload({idToken:t.credential})).accessToken),n=Qt(t.credential);g(ee,o.hasSignedIn=!0,o),g(xt,s={_id:e.sub,email:e.email,name:e.name,role:e.role,hasVoted:e.hasVoted,gamesVoted:e.gamesVoted,avatar:n.picture},s),zt({message:"You're signed in",type:"success"})},[]}class oe extends bt{constructor(t){super(),vt(this,t,se,ne,a,{})}}const re=wt({list:[],playing:""});function ae(e){let n,s,a,c,l,u,d,f,m,p,g,h;return{c(){n=S("div"),s=S("button"),s.innerHTML="<span>×</span>",a=T(),c=S("div"),l=S("div"),u=S("iframe"),M(s,"type","button"),M(s,"class","playing__close svelte-mdfw7x"),M(u,"title",""),I(u,"position","absolute"),I(u,"top","0"),I(u,"left","0"),I(u,"width","100%"),I(u,"height","100%"),i(u.src,d="https://arcade.makecode.com/---run?id="+e[0].playing)||M(u,"src",d),M(u,"sandbox","allow-popups allow-forms allow-scripts allow-same-origin"),M(u,"frameborder","0"),M(l,"class","playing__content svelte-mdfw7x"),M(c,"class","playing__main svelte-mdfw7x"),M(n,"class","playing svelte-mdfw7x")},m(o,i){var d;C(o,n,i),w(n,s),w(n,a),w(n,c),w(c,l),w(l,u),p=!0,g||(h=[j(s,"click",e[1]),(d=f=ie.call(null,n),d&&r(d.destroy)?d.destroy:t)],g=!0)},p(t,e){(!p||1&e&&!i(u.src,d="https://arcade.makecode.com/---run?id="+t[0].playing))&&M(u,"src",d)},i(t){p||(K((()=>{m||(m=dt(n,qt,{},!0)),m.run(1)})),p=!0)},o(t){m||(m=dt(n,qt,{},!1)),m.run(0),p=!1},d(t){t&&E(n),t&&m&&m.end(),g=!1,o(h)}}}function ce(t){let e,n,s=t[0].playing&&ae(t);return{c(){s&&s.c(),e=V()},m(t,o){s&&s.m(t,o),C(t,e,o),n=!0},p(t,[n]){t[0].playing?s?(s.p(t,n),1&n&&it(s,1)):(s=ae(t),s.c(),it(s,1),s.m(e.parentNode,e)):s&&(at(),lt(s,1,1,(()=>{s=null})),ct())},i(t){n||(it(s),n=!0)},o(t){lt(s),n=!1},d(t){s&&s.d(t),t&&E(e)}}}function ie(t){t.focus()}function le(t,e,n){let s;return l(t,re,(t=>n(0,s=t))),[s,function(){g(re,s.playing="",s)}]}class ue extends bt{constructor(t){super(),vt(this,t,le,ce,a,{})}}const de=new class{async findAll(){const t=await Zt.get("/api/games");if(200===t.statusCode)return t.data;throw new Error("Failed to find all games")}};const fe=function(){const{subscribe:t,set:e}=wt({visible:!1});return{subscribe:t,display:()=>e({visible:!0}),hide:()=>e({visible:!1})}}(),me=wt([]),pe=t=>{me.update((e=>[...e,t]))},ge=t=>({}),he=t=>({}),$e=t=>({}),ye=t=>({});function ve(e){let n,s,r,a,c,i,l,d,g,h,$,y,v;const b=e[4].title,_=u(b,e,e[3],ye),x=_||function(e){let n;return{c(){n=S("h5"),n.textContent="Modal title",M(n,"class","modal__title svelte-1mzxz9l")},m(t,e){C(t,n,e)},p:t,d(t){t&&E(n)}}}(),k=e[4].default,z=u(k,e,e[3],null),V=e[4].footer,q=u(V,e,e[3],he),I=q||function(e){let n,s,o;return{c(){n=S("button"),n.textContent="Close",M(n,"type","button"),M(n,"class","btn btn--secondary")},m(t,r){C(t,n,r),s||(o=j(n,"click",e[1]),s=!0)},p:t,d(t){t&&E(n),s=!1,o()}}}(e);return{c(){n=S("div"),s=S("div"),r=S("div"),x&&x.c(),a=T(),c=S("button"),c.innerHTML="<span>×</span>",i=T(),l=S("div"),z&&z.c(),d=T(),g=S("div"),I&&I.c(),M(c,"type","button"),M(c,"class","modal__close svelte-1mzxz9l"),M(r,"class","modal__header svelte-1mzxz9l"),M(l,"class","modal__body svelte-1mzxz9l"),M(g,"class","modal__footer svelte-1mzxz9l"),M(s,"class","modal__content svelte-1mzxz9l"),M(n,"class","modal svelte-1mzxz9l")},m(t,o){C(t,n,o),w(n,s),w(s,r),x&&x.m(r,null),w(r,a),w(r,c),w(s,i),w(s,l),z&&z.m(l,null),w(s,d),w(s,g),I&&I.m(g,null),$=!0,y||(v=[j(c,"click",e[1]),j(n,"click",e[1])],y=!0)},p(t,e){_&&_.p&&(!$||8&e)&&m(_,b,t,t[3],$?f(b,t[3],e,$e):p(t[3]),ye),z&&z.p&&(!$||8&e)&&m(z,k,t,t[3],$?f(k,t[3],e,null):p(t[3]),null),q&&q.p&&(!$||8&e)&&m(q,V,t,t[3],$?f(V,t[3],e,ge):p(t[3]),he)},i(t){$||(it(x,t),it(z,t),it(I,t),K((()=>{h||(h=dt(n,jt,{duration:200},!0)),h.run(1)})),$=!0)},o(t){lt(x,t),lt(z,t),lt(I,t),h||(h=dt(n,jt,{duration:200},!1)),h.run(0),$=!1},d(t){t&&E(n),x&&x.d(t),z&&z.d(t),I&&I.d(t),t&&h&&h.end(),y=!1,o(v)}}}function be(t){let e,n,s,o,r=t[0].visible&&ve(t);return{c(){r&&r.c(),e=V()},m(a,c){r&&r.m(a,c),C(a,e,c),n=!0,s||(o=j(window,"keydown",t[2]),s=!0)},p(t,[n]){t[0].visible?r?(r.p(t,n),1&n&&it(r,1)):(r=ve(t),r.c(),it(r,1),r.m(e.parentNode,e)):r&&(at(),lt(r,1,1,(()=>{r=null})),ct())},i(t){n||(it(r),n=!0)},o(t){lt(r),n=!1},d(t){r&&r.d(t),t&&E(e),s=!1,o()}}}function _e(t,e,n){let s;l(t,fe,(t=>n(0,s=t)));let{$$slots:o={},$$scope:r}=e;function a(){fe.hide()}return t.$$set=t=>{"$$scope"in t&&n(3,r=t.$$scope)},[s,a,function(t){"Escape"===t.key&&a()},r,o]}class we extends bt{constructor(t){super(),vt(this,t,_e,be,a,{})}}const{document:xe}=ft;function ke(e){let n,s,o,r;return{c(){n=S("script"),o=T(),r=S("div"),i(n.src,s="https://accounts.google.com/gsi/client")||M(n,"src","https://accounts.google.com/gsi/client"),n.async=!0,n.defer=!0,M(r,"class","g_id_signin"),M(r,"data-type","standard"),M(r,"data-shape","rectangular"),M(r,"data-theme","outline"),M(r,"data-text","signin_with"),M(r,"data-size","large"),M(r,"data-locale","en"),M(r,"data-logo_alignment","left")},m(t,e){w(xe.head,n),C(t,o,e),C(t,r,e)},p:t,i:t,o:t,d(t){E(n),t&&E(o),t&&E(r)}}}function Ce(t,e,n){let s,o;return l(t,xt,(t=>n(0,s=t))),l(t,ee,(t=>n(1,o=t))),H((()=>{window.matchMedia("(max-width: 1024px)").matches?document.querySelector("#g_id_onload").setAttribute("data-auto_prompt","false"):document.querySelector("#g_id_onload").setAttribute("data-auto_prompt","true")})),window.handleCredentialResponse=async t=>{const e=Qt((await te.sendPayload({idToken:t.credential})).accessToken),n=Qt(t.credential);g(ee,o.hasSignedIn=!0,o),g(xt,s={_id:e.sub,email:e.email,name:e.name,role:e.role,hasVoted:e.hasVoted,gamesVoted:e.gamesVoted,avatar:n.picture},s),fe.hide(),zt({message:"You're signed in",type:"success"})},[]}class Ee extends bt{constructor(t){super(),vt(this,t,Ce,ke,a,{})}}function Se(e){let n,s,o,r,a;return r=new Ee({}),{c(){n=S("p"),n.textContent="Please sign in to continue.",s=T(),o=S("div"),gt(r.$$.fragment),M(n,"class","modal__message"),M(o,"class","modal__google svelte-1rg41rg")},m(t,e){C(t,n,e),C(t,s,e),C(t,o,e),ht(r,o,null),a=!0},p:t,i(t){a||(it(r.$$.fragment,t),a=!0)},o(t){lt(r.$$.fragment,t),a=!1},d(t){t&&E(n),t&&E(s),t&&E(o),$t(r)}}}function ze(e){let n;return{c(){n=S("h5"),n.textContent="Sign In",M(n,"class","modal__title svelte-1rg41rg")},m(t,e){C(t,n,e)},p:t,d(t){t&&E(n)}}}function Te(t){let e,n;return e=new we({props:{$$slots:{title:[ze],default:[Se]},$$scope:{ctx:t}}}),{c(){gt(e.$$.fragment)},m(t,s){ht(e,t,s),n=!0},p(t,[n]){const s={};1&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){lt(e.$$.fragment,t),n=!1},d(t){$t(e,t)}}}class Ve extends bt{constructor(t){super(),vt(this,t,null,Te,a,{})}}function je(t){let e,n,s,r,a,c,l,u,d,f,m,p,g,h,$,y,v,b,_,x,k,V,I=t[0].name+"",L=t[0].team+"";return _=new Ve({}),{c(){e=S("div"),n=S("img"),a=T(),c=S("div"),l=S("h5"),u=z(I),d=T(),f=S("h5"),m=z("By "),p=z(L),g=T(),h=S("div"),$=S("button"),$.textContent="Vote",y=T(),v=S("button"),v.textContent="Play",b=T(),gt(_.$$.fragment),M(n,"class","game__thumbnail svelte-a7butw"),i(n.src,s=t[0].thumbnail)||M(n,"src",s),M(n,"alt",r=t[0].name),M(l,"class","game__title svelte-a7butw"),M(f,"class","game__team svelte-a7butw"),M(c,"class","game__detail svelte-a7butw"),M($,"type","button"),M($,"class","btn btn--cube-2-outline"),M(v,"type","button"),M(v,"class","btn btn--cube-1"),M(h,"class","game__action svelte-a7butw"),M(e,"class","game svelte-a7butw")},m(s,o){C(s,e,o),w(e,n),w(e,a),w(e,c),w(c,l),w(l,u),w(c,d),w(c,f),w(f,m),w(f,p),w(e,g),w(e,h),w(h,$),t[4]($),w(h,y),w(h,v),C(s,b,o),ht(_,s,o),x=!0,k||(V=[j(n,"click",t[2]),j($,"click",t[3]),j(v,"click",t[2])],k=!0)},p(t,[e]){(!x||1&e&&!i(n.src,s=t[0].thumbnail))&&M(n,"src",s),(!x||1&e&&r!==(r=t[0].name))&&M(n,"alt",r),(!x||1&e)&&I!==(I=t[0].name+"")&&q(u,I),(!x||1&e)&&L!==(L=t[0].team+"")&&q(p,L)},i(t){x||(it(_.$$.fragment,t),x=!0)},o(t){lt(_.$$.fragment,t),x=!1},d(n){n&&E(e),t[4](null),n&&E(b),$t(_,n),k=!1,o(V)}}}function Me(t,e,n){let s,o,r,a;l(t,me,(t=>n(6,s=t))),l(t,xt,(t=>n(7,o=t))),l(t,ee,(t=>n(8,r=t))),l(t,re,(t=>n(9,a=t)));let{data:c={_id:"",name:"",team:"",thumbnail:"",source:""}}=e,i=null,u=!1;return t.$$set=t=>{"data"in t&&n(0,c=t.data)},[c,i,function(){g(re,a.playing=c.source,a)},function(){if(r.hasSignedIn){var t;if(!o.hasVoted)return u?(u=!1,t=c._id,me.update((e=>e.filter((e=>e._id!==t)))),n(1,i.innerHTML="Vote",i),i.classList.remove("btn--cube-2"),void i.classList.add("btn--cube-2-outline")):void(s.length>=3?zt({message:"You can't vote more than 3 games",type:"error"}):(u=!0,pe({_id:c._id,name:c.name}),n(1,i.innerHTML="&#x2714;",i),i.classList.remove("btn--cube-2-outline"),i.classList.add("btn--cube-2")));zt({message:"You can't vote after submitting your votes!",type:"error"})}else fe.display()},function(t){F[t?"unshift":"push"]((()=>{i=t,n(1,i)}))}]}class qe extends bt{constructor(t){super(),vt(this,t,Me,je,a,{data:0})}}function Ie(t,e,n){const s=t.slice();return s[1]=e[n],s}function Le(t,e){let n,s,o;return s=new qe({props:{data:e[1]}}),{key:t,first:null,c(){n=V(),gt(s.$$.fragment),this.first=n},m(t,e){C(t,n,e),ht(s,t,e),o=!0},p(t,n){e=t;const o={};1&n&&(o.data=e[1]),s.$set(o)},i(t){o||(it(s.$$.fragment,t),o=!0)},o(t){lt(s.$$.fragment,t),o=!1},d(t){t&&E(n),$t(s,t)}}}function Ae(t){let e,n,s=[],o=new Map,r=t[0].list;const a=t=>t[1]._id;for(let e=0;e<r.length;e+=1){let n=Ie(t,r,e),c=a(n);o.set(c,s[e]=Le(c,n))}return{c(){e=S("div");for(let t=0;t<s.length;t+=1)s[t].c();M(e,"class","game-list svelte-sc998v")},m(t,o){C(t,e,o);for(let t=0;t<s.length;t+=1)s[t].m(e,null);n=!0},p(t,[n]){1&n&&(r=t[0].list,at(),s=pt(s,n,a,1,t,r,o,e,mt,Le,null,Ie),ct())},i(t){if(!n){for(let t=0;t<r.length;t+=1)it(s[t]);n=!0}},o(t){for(let t=0;t<s.length;t+=1)lt(s[t]);n=!1},d(t){t&&E(e);for(let t=0;t<s.length;t+=1)s[t].d()}}}function Pe(t,e,n){let s;return l(t,re,(t=>n(0,s=t))),H((async()=>{g(re,s.list=await de.findAll(),s)})),[s]}class Re extends bt{constructor(t){super(),vt(this,t,Pe,Ae,a,{})}}function Ne(e){let n,s,o,r,a,c,i,l,u,d,f;return l=new Ve({}),{c(){n=S("div"),s=S("div"),o=S("p"),r=z("You have to\r\n      "),a=S("span"),a.textContent="sign in",c=z("\r\n      to vote!"),i=T(),gt(l.$$.fragment),M(a,"class","vote-require__link svelte-2cjqxn"),M(o,"class","vote-require__message svelte-2cjqxn"),M(s,"class","vote-require__content svelte-2cjqxn"),M(n,"class","vote-require svelte-2cjqxn")},m(t,m){C(t,n,m),w(n,s),w(s,o),w(o,r),w(o,a),w(o,c),C(t,i,m),ht(l,t,m),u=!0,d||(f=j(a,"click",e[0]),d=!0)},p:t,i(t){u||(it(l.$$.fragment,t),u=!0)},o(t){lt(l.$$.fragment,t),u=!1},d(t){t&&E(n),t&&E(i),$t(l,t),d=!1,f()}}}function Oe(t){return[function(t){t.preventDefault(),fe.display()}]}class Ue extends bt{constructor(t){super(),vt(this,t,Oe,Ne,a,{})}}const Ye=new class{async sendVotes(t,e){const n={voter:t,games:e},s=await Zt.post("/api/vote",n);if(200===s.statusCode)return s.data;if(400===s.statusCode)throw new Error("You can only vote once");throw new Error("Failed to vote")}};function He(t,e,n){const s=t.slice();return s[5]=e[n],s}function De(t){let e,n,s,o,r;return{c(){e=z("Games you choose: "),n=S("span"),s=z("("),o=z(t[1]),r=z("/3)"),M(n,"class","vote-stats__count svelte-82o8i2")},m(t,a){C(t,e,a),C(t,n,a),w(n,s),w(n,o),w(n,r)},p(t,e){2&e&&q(o,t[1])},d(t){t&&E(e),t&&E(n)}}}function Fe(t){let e,n,s,o,r;return{c(){e=z("Games you voted: "),n=S("span"),s=z("("),o=z(t[1]),r=z("/3)"),M(n,"class","vote-stats__count count--voted svelte-82o8i2")},m(t,a){C(t,e,a),C(t,n,a),w(n,s),w(n,o),w(n,r)},p(t,e){2&e&&q(o,t[1])},d(t){t&&E(e),t&&E(n)}}}function Ge(t){let e,n,s,o=t[5].name+"";return{c(){e=S("li"),n=z("- "),s=z(o),M(e,"class","svelte-82o8i2")},m(t,o){C(t,e,o),w(e,n),w(e,s)},p(t,e){1&e&&o!==(o=t[5].name+"")&&q(s,o)},d(t){t&&E(e)}}}function Be(e){let n,s,o;return{c(){n=S("button"),n.textContent="Submit",M(n,"type","button"),M(n,"class","btn")},m(t,r){C(t,n,r),s||(o=j(n,"click",e[3]),s=!0)},p:t,d(t){t&&E(n),s=!1,o()}}}function Je(e){let n;return{c(){n=S("button"),n.textContent="Submit",M(n,"type","button"),M(n,"class","btn btn--disabled"),n.disabled=!0},m(t,e){C(t,n,e)},p:t,d(t){t&&E(n)}}}function We(e){let n,s,o,r,a,c,i,l;function u(t,e){return t[2].hasVoted?Fe:De}let d=u(e),f=d(e),m=e[0],p=[];for(let t=0;t<m.length;t+=1)p[t]=Ge(He(e,m,t));function g(t,e){return t[2].hasVoted?Je:Be}let h=g(e),$=h(e);return{c(){n=S("div"),s=S("div"),o=S("div"),r=S("p"),f.c(),a=T(),c=S("ul");for(let t=0;t<p.length;t+=1)p[t].c();i=T(),l=S("div"),$.c(),M(r,"class","vote-stats__message svelte-82o8i2"),M(c,"class","vote-stats__list svelte-82o8i2"),M(o,"class","vote-stats__main"),M(l,"class","vote-stats__action svelte-82o8i2"),M(s,"class","vote-stats__content svelte-82o8i2"),M(n,"class","vote-stats svelte-82o8i2")},m(t,e){C(t,n,e),w(n,s),w(s,o),w(o,r),f.m(r,null),w(o,a),w(o,c);for(let t=0;t<p.length;t+=1)p[t].m(c,null);w(s,i),w(s,l),$.m(l,null)},p(t,[e]){if(d===(d=u(t))&&f?f.p(t,e):(f.d(1),f=d(t),f&&(f.c(),f.m(r,null))),1&e){let n;for(m=t[0],n=0;n<m.length;n+=1){const s=He(t,m,n);p[n]?p[n].p(s,e):(p[n]=Ge(s),p[n].c(),p[n].m(c,null))}for(;n<p.length;n+=1)p[n].d(1);p.length=m.length}h===(h=g(t))&&$?$.p(t,e):($.d(1),$=h(t),$&&($.c(),$.m(l,null)))},i:t,o:t,d(t){t&&E(n),f.d(),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(p,t),$.d()}}}function Ke(t,e,n){let s,o,r,a;return l(t,xt,(t=>n(2,o=t))),l(t,me,(t=>n(0,r=t))),l(t,re,(t=>n(4,a=t))),o.hasVoted&&o.gamesVoted.forEach((t=>{const e=a.list.find((e=>e._id===t));e&&pe({_id:e._id,name:e.name})})),t.$$.update=()=>{1&t.$$.dirty&&n(1,s=r.length)},[r,s,o,async function(){const t=o._id,e=r.map((t=>t._id));if(0!==e.length)try{await Ye.sendVotes(t,e),zt({message:"Your votes have been submitted!",type:"success"}),g(xt,o.hasVoted=!0,o)}catch(t){zt({message:t.message,type:"error"})}else zt({message:"You must vote for at least one game!",type:"error"})}]}class Qe extends bt{constructor(t){super(),vt(this,t,Ke,We,a,{})}}function Xe(t){let e,n;return e=new Ue({}),{c(){gt(e.$$.fragment)},m(t,s){ht(e,t,s),n=!0},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){lt(e.$$.fragment,t),n=!1},d(t){$t(e,t)}}}function Ze(t){let e,n;return e=new Qe({}),{c(){gt(e.$$.fragment)},m(t,s){ht(e,t,s),n=!0},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){lt(e.$$.fragment,t),n=!1},d(t){$t(e,t)}}}function tn(t){let e,n,s,o;const r=[Ze,Xe],a=[];function c(t,e){return t[0].hasSignedIn?0:1}return e=c(t),n=a[e]=r[e](t),{c(){n.c(),s=V()},m(t,n){a[e].m(t,n),C(t,s,n),o=!0},p(t,[o]){let i=e;e=c(t),e!==i&&(at(),lt(a[i],1,1,(()=>{a[i]=null})),ct(),n=a[e],n||(n=a[e]=r[e](t),n.c()),it(n,1),n.m(s.parentNode,s))},i(t){o||(it(n),o=!0)},o(t){lt(n),o=!1},d(t){a[e].d(t),t&&E(s)}}}function en(t,e,n){let s;return l(t,ee,(t=>n(0,s=t))),[s]}class nn extends bt{constructor(t){super(),vt(this,t,en,tn,a,{})}}function sn(e){let n,s,o,r,a,c,i,l,u,d,f,m,p;return n=new Et({}),o=new Gt({}),a=new oe({}),i=new ue({}),u=new nn({}),m=new Re({}),{c(){gt(n.$$.fragment),s=T(),gt(o.$$.fragment),r=T(),gt(a.$$.fragment),c=T(),gt(i.$$.fragment),l=T(),gt(u.$$.fragment),d=T(),f=S("div"),gt(m.$$.fragment),M(f,"class","container svelte-49xx53")},m(t,e){ht(n,t,e),C(t,s,e),ht(o,t,e),C(t,r,e),ht(a,t,e),C(t,c,e),ht(i,t,e),C(t,l,e),ht(u,t,e),C(t,d,e),C(t,f,e),ht(m,f,null),p=!0},p:t,i(t){p||(it(n.$$.fragment,t),it(o.$$.fragment,t),it(a.$$.fragment,t),it(i.$$.fragment,t),it(u.$$.fragment,t),it(m.$$.fragment,t),p=!0)},o(t){lt(n.$$.fragment,t),lt(o.$$.fragment,t),lt(a.$$.fragment,t),lt(i.$$.fragment,t),lt(u.$$.fragment,t),lt(m.$$.fragment,t),p=!1},d(t){$t(n,t),t&&E(s),$t(o,t),t&&E(r),$t(a,t),t&&E(c),$t(i,t),t&&E(l),$t(u,t),t&&E(d),t&&E(f),$t(m)}}}return new class extends bt{constructor(t){super(),vt(this,t,null,sn,a,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
